<!doctype html>

<html>
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="createQR/src/jquery.min.js"></script>
    <script src="https://cdn.rawgit.com/ethereum/web3.js/develop/dist/web3.js"></script>
    <script type="text/javascript" src="./web3/bower_components/web3/dist/web3.min.js"></script>
    <style>
    .contents
    {
        float:center;
        width:100%;
        margin:0 auto;
        text-align:left;
    }
    .input
    {
        padding-top: 50px;
        padding-left: 100px;
        font-size : 20px;
    }
    .button
    {
        padding-left: 100px;
        font-size : 15px;
    }
</style>
</head>
<body>
    <div class="contents">
       <div class="input">
        <form>
            ADDRESS<br>
            <input type="text" name="userid"><br><br>

            AMOUNT OF COINS<br>
            <input type="number" name="pwd" maxlength='5'><br>
        </form>
    </div>
    <br>
    <div class="button">
        <form action="a.html">
            <input type="button" name="sending_button" value="SEND COINS" onclick="sendTransaction()">
            <input type="button" name="balances_button" value="SHOW BALANCES" onclick="showBalances()">
            <input type="button" name="Freecoin_button" value="FREE COINS" onclick="Freecoins()">
        </div>
    </div>
    <br>
</div>
</body>

<script>
    var Web3 = require('web3');
            web3 = new Web3(new Web3.providers.HttpProvider("http://54.145.119.133:8545"));
            // web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
              // web3 = new Web3(new Web3.providers.HttpProvider('https://ropsten.infura.io/IA462256D6J1K3ZSGFUMXCCSZRAQXEE5ZZ'));

            var KNU = web3.eth.contract([
    {
        "constant": true,
        "inputs": [
            {
                "name": "",
                "type": "address"
            }
        ],
        "name": "walletname",
        "outputs": [
            {
                "name": "",
                "type": "string"
            }
        ],
        "payable": false,
        "type": "function",
        "stateMutability": "view"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "totalSupply",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "type": "function",
        "stateMutability": "view"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "symbol",
        "outputs": [
            {
                "name": "",
                "type": "string"
            }
        ],
        "payable": false,
        "type": "function",
        "stateMutability": "view"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "owner",
        "outputs": [
            {
                "name": "",
                "type": "address"
            }
        ],
        "payable": false,
        "type": "function",
        "stateMutability": "view"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "name",
        "outputs": [
            {
                "name": "",
                "type": "string"
            }
        ],
        "payable": false,
        "type": "function",
        "stateMutability": "view"
    },
    {
        "constant": true,
        "inputs": [
            {
                "name": "",
                "type": "address"
            }
        ],
        "name": "id",
        "outputs": [
            {
                "name": "",
                "type": "string"
            }
        ],
        "payable": false,
        "type": "function",
        "stateMutability": "view"
    },
    {
        "constant": true,
        "inputs": [
            {
                "name": "_add",
                "type": "address"
            }
        ],
        "name": "getBalance",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "type": "function",
        "stateMutability": "view"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "decimals",
        "outputs": [
            {
                "name": "",
                "type": "uint8"
            }
        ],
        "payable": false,
        "type": "function",
        "stateMutability": "view"
    },
    {
        "constant": true,
        "inputs": [
            {
                "name": "",
                "type": "address"
            }
        ],
        "name": "balanceOf",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "type": "function",
        "stateMutability": "view"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "_add",
                "type": "address"
            }
        ],
        "name": "Freecoin",
        "outputs": [],
        "payable": false,
        "type": "function",
        "stateMutability": "nonpayable"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "name": "from",
                "type": "address"
            },
            {
                "indexed": true,
                "name": "to",
                "type": "address"
            },
            {
                "indexed": false,
                "name": "value",
                "type": "uint256"
            }
        ],
        "name": "Transfer",
        "type": "event"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "_id",
                "type": "string"
            }
        ],
        "name": "setID",
        "outputs": [],
        "payable": false,
        "type": "function",
        "stateMutability": "nonpayable"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "_name",
                "type": "string"
            }
        ],
        "name": "setwalletname",
        "outputs": [],
        "payable": false,
        "type": "function",
        "stateMutability": "nonpayable"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "_from",
                "type": "address"
            },
            {
                "name": "_to",
                "type": "address"
            },
            {
                "name": "_value",
                "type": "uint256"
            }
        ],
        "name": "transfer",
        "outputs": [],
        "payable": false,
        "type": "function",
        "stateMutability": "nonpayable"
    },
    {
        "inputs": [
            {
                "name": "_supply",
                "type": "uint256"
            },
            {
                "name": "_name",
                "type": "string"
            },
            {
                "name": "_symbol",
                "type": "string"
            },
            {
                "name": "_decimals",
                "type": "uint8"
            }
        ],
        "type": "constructor",
        "payable": true,
        "stateMutability": "payable"
    }
]);

var KNUInstance = KNU.at("0xc7cd706d12365c52104d4daa25f2a8533dcff624");

/*Setting default account*/

web3.eth.defaultAccount = web3.eth.accounts[9];
// console.log(web3.eth.defaultAccount);
// web3.eth.personal.unlockAccount(web3.eth.defaultAccount, "donghoon", 600);

// personal.unlockAccount(web3.eth.defaultAccount);


   /* var wallet = web3.eth.getAccounts(function(e,r){
        console.log(r);
    });
    console.log(wallet);

    function showAccounts(){
    web3.eth.getAccounts(function(e,r){
        document.getElementById('accounts').innerHTML = r;
    })  
} */

function Freecoins(){
    // web3 = new Web3(new Web3.providers.HttpProvider('https://ropsten.infura.io/IA462256D6J1K3ZSGFUMXCCSZRAQXEE5ZZ'));

    // var wallet1 = web3.eth.accounts[0];
    // var wallet1 = "0x9cd2d21c06db8b7158d00e3078cd7cb8bb475dd8";
    // var wallet2 = "0xc81ece8325385a766080394fe8ce527bf728b679";
    // console.log(wallet1);
    // console.log(wallet2);
    // var balance1 = KNUInstance.balanceOf(wallet1).toNumber();
    // console.log(balance1);
    // var balance2 = KNUInstance.getBalance("0xc81ece8325385a766080394fe8ce527bf728b679");
    // console.log(balance2);
    // var balance2 = KNUInstance.balanceOf(wallet2).toNumber();
    // console.log(balance2);
    KNUInstance.Freecoin(web3.eth.accounts[0]);
     var balance1 = KNUInstance.balanceOf(web3.eth.accounts[0]).toNumber();
        console.log(balance1);
    };

function showBalances(){
  var wallet1 = web3.eth.accounts[0];
  var wallet2 = web3.eth.accounts[1];

  var coin1 = KNUInstance.balanceOf(wallet1);
  var coin2 = KNUInstance.balanceOf(wallet2);

  console.log(coin1);
  console.log(coin2);
//  var list = coin1 + '<br>'+ coin2 + '<br>';

//  document.getElementById('h1').innerHTML=list;
};

function sendTransaction(){
    var from_account = web3.eth.accounts[9];
    var to_account = web3.eth.accounts[1];
 //web3.personal.unlockAccount("0x..", "<passs>", 1000);
 // KNUInstance.transfer.sendTransaction(from_account, to_account, 20000,  {from:from_account, gas:1000000});
 KNUInstance.transfer(from_account, to_account, 1000);
     var balance1 = KNUInstance.balanceOf(from_account).toNumber();
        console.log(balance1);
        var balance2 = KNUInstance.balanceOf(to_account).toNumber();
        console.log(balance2);
 // KNUInstance.setValue.sendTransaction("2018-07-06", 1000000, 5500000, "Daiso", "withdraw", {from : web3.eth.accounts[0], gas:11000000});

//     // KNUInstance.setValue.sendTransaction("2018-07-07", 50000000, 60500000, "Harry", "Deposit", {from : web3.eth.accounts[0], gas:11000000});
};


//     //  web3.eth.getAccounts(function(e,r){
//     //     console.log(r);
//     // });
//     // console.log(KNUInstance.balan)

//    // KNUInstance.setValue.sendTransaction("2018-07-06", 1000000, 5500000, "Daiso", "withdraw", {from : web3.eth.accounts[0], gas:11000000});

//     // KNUInstance.setValue.sendTransaction("2018-07-07", 50000000, 60500000, "Harry", "Deposit", {from : web3.eth.accounts[0], gas:11000000});

//      var trans1 = KNUInstance.getValue(0);
//      console.log(trans1[2].c);
//    document.getElementById('hi').innerHTML=trans1;
//      var trans2 = KNUInstance.getValue(1);
//      console.log(trans2);
//    document.getElementById('hi2').innerHTML=trans2;
</script>

</html>