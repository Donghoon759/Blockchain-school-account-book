<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>web3 test</title>
	<script type="text/javascript" src="web3.min.js"></script>
	<script type="text/javascript">
	var Web3 = require('web3');
	var web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
	var KNU = web3.eth.contract([
	{
		"constant": false,
		"inputs": [
			{
				"name": "_from",
				"type": "address"
			},
			{
				"name": "_to",
				"type": "address"
			},
			{
				"name": "_value",
				"type": "uint256"
			}
		],
		"name": "transfer",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Transfer",
		"type": "event"
	},
	{
		"inputs": [
			{
				"name": "_supply",
				"type": "uint256"
			},
			{
				"name": "_name",
				"type": "string"
			},
			{
				"name": "_symbol",
				"type": "string"
			},
			{
				"name": "_decimals",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "decimals",
		"outputs": [
			{
				"name": "",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "totalSupply",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
]);
	var KNUInstance = KNU.at("0x6b4c7c366e70d314622ef951732d5a64628945bb");
	
	
	var network_version = web3.version.network;
	console.log(network_version);

	var accounts = web3.eth.accounts;
	console.log(accounts);


	//console.log(proofContract.options.address);


	var from_account = accounts[0];
	var to_account = accounts[1];

	var transactionObj = {
		from : from_account,
		 to : to_account,
		 value : 1000
	};
	
//	KNUInstance.transfer.sendTransaction(from_account, to_account, 20000,  {from:accounts[0], gas:1000000});



//web3.eth.sendTransaction(transactionObj)

	var wallet1 = web3.eth.accounts[0];
	var wallet2 = web3.eth.accounts[1];

//	var balance1 = web3.eth.getBalance(wallet1);
//	var balance2 = web3.eth.getBalance(wallet2);

	console.log(wallet1);
	console.log(wallet2);
//	console.log(balance1);
//	console.log(balance2);
	var coin1 = KNUInstance.balanceOf(wallet1);
	console.log(coin1);
	var coin2 = KNUInstance.balanceOf(wallet2);
	console.log(coin2);


/*function watchTokenTransfers() {
  // Instantiate web3 with WebSocketProvider
 // const web3 = new Web3(new Web3.providers.WebsocketProvider('wss://rinkeby.infura.io/ws'))

  // Instantiate token contract object with JSON ABI and address
  const tokenContract = new web3.eth.Contract(
    TOKEN_ABI, process.env.TOKEN_CONTRACT_ADDRESS,
    (error, result) => { if (error) console.log(error) }
  )

  // Generate filter options
  const options = {
    filter: {
      _from:  process.env.WALLET_FROM,
      _to:    process.env.WALLET_TO,
      _value: process.env.AMOUNT
    },
    fromBlock: 'latest'
  }

  // Subscribe to Transfer events matching filter criteria
  tokenContract.events.Transfer(options, async (error, event) => {
    if (error) {
      console.log(error)
      return
    }

    console.log('Found incoming Pluton transaction from ' + process.env.WALLET_FROM + ' to ' + process.env.WALLET_TO + '\n');
    console.log('Transaction value is: ' + process.env.AMOUNT)
    console.log('Transaction hash is: ' + txHash + '\n')

    // Initiate transaction confirmation
    confirmEtherTransaction(event.transactionHash)

    return
  })
}*/
	</script>
</head>
<body>
</body>
</html>
